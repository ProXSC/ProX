
local function base64Decode(data)
    local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i - f%2^(i-1) > 0 and '1' or '0') end
        return r;
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if (#x ~= 8) then return '' end
        local c=0
        for i=1,8 do c=c + (x:sub(i,i)=='1' and 2^(8-i) or 0) end
        return string.char(c)
    end))
end

-------------------------------------------------------------------------------
--! json library
--! cryptography library
local a=2^32;local b=a-1;local function c(d,e)local f,g=0,1;while d~=0 or e~=0 do local h,i=d%2,e%2;local j=(h+i)%2;f=f+j*g;d=math.floor(d/2)e=math.floor(e/2)g=g*2 end;return f%a end;local function k(d,e,l,...)local m;if e then d=d%a;e=e%a;m=c(d,e)if l then m=k(m,l,...)end;return m elseif d then return d%a else return 0 end end;local function n(d,e,l,...)local m;if e then d=d%a;e=e%a;m=(d+e-c(d,e))/2;if l then m=n(m,l,...)end;return m elseif d then return d%a else return b end end;local function o(p)return b-p end;local function q(d,r)if r<0 then return lshift(d,-r)end;return math.floor(d%2^32/2^r)end;local function s(p,r)if r>31 or r<-31 then return 0 end;return q(p%a,r)end;local function lshift(d,r)if r<0 then return s(d,-r)end;return d*2^r%2^32 end;local function t(p,r)p=p%a;r=r%32;local u=n(p,2^r-1)return s(p,r)+lshift(u,32-r)end;local v={0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2}local function w(x)return string.gsub(x,".",function(l)return string.format("%02x",string.byte(l))end)end;local function y(z,A)local x=""for B=1,A do local C=z%256;x=string.char(C)..x;z=(z-C)/256 end;return x end;local function D(x,B)local A=0;for B=B,B+3 do A=A*256+string.byte(x,B)end;return A end;local function E(F,G)local H=64-(G+9)%64;G=y(8*G,8)F=F.."\128"..string.rep("\0",H)..G;assert(#F%64==0)return F end;local function I(J)J[1]=0x6a09e667;J[2]=0xbb67ae85;J[3]=0x3c6ef372;J[4]=0xa54ff53a;J[5]=0x510e527f;J[6]=0x9b05688c;J[7]=0x1f83d9ab;J[8]=0x5be0cd19;return J end;local function K(F,B,J)local L={}for M=1,16 do L[M]=D(F,B+(M-1)*4)end;for M=17,64 do local N=L[M-15]local O=k(t(N,7),t(N,18),s(N,3))N=L[M-2]L[M]=(L[M-16]+O+L[M-7]+k(t(N,17),t(N,19),s(N,10)))%a end;local d,e,l,P,Q,R,S,T=J[1],J[2],J[3],J[4],J[5],J[6],J[7],J[8]for B=1,64 do local O=k(t(d,2),t(d,13),t(d,22))local U=k(n(d,e),n(d,l),n(e,l))local V=(O+U)%a;local W=k(t(Q,6),t(Q,11),t(Q,25))local X=k(n(Q,R),n(o(Q),S))local Y=(T+W+X+v[B]+L[B])%a;T=S;S=R;R=Q;Q=(P+Y)%a;P=l;l=e;e=d;d=(Y+V)%a end;J[1]=(J[1]+d)%a;J[2]=(J[2]+e)%a;J[3]=(J[3]+l)%a;J[4]=(J[4]+P)%a;J[5]=(J[5]+Q)%a;J[6]=(J[6]+R)%a;J[7]=(J[7]+S)%a;J[8]=(J[8]+T)%a end;local function Z(F)F=E(F,#F)local J=I({})for B=1,#F,64 do K(F,B,J)end;return w(y(J[1],4)..y(J[2],4)..y(J[3],4)..y(J[4],4)..y(J[5],4)..y(J[6],4)..y(J[7],4)..y(J[8],4))end;local e;local l={["\\"]="\\",["\""]="\"",["\b"]="b",["\f"]="f",["\n"]="n",["\r"]="r",["\t"]="t"}local P={["/"]="/"}for Q,R in pairs(l)do P[R]=Q end;local S=function(T)return"\\"..(l[T]or string.format("u%04x",T:byte()))end;local B=function(M)return"null"end;local v=function(M,z)local _={}z=z or{}if z[M]then error("circular reference")end;z[M]=true;if rawget(M,1)~=nil or next(M)==nil then local A=0;for Q in pairs(M)do if type(Q)~="number"then error("invalid table: mixed or invalid key types")end;A=A+1 end;if A~=#M then error("invalid table: sparse array")end;for a0,R in ipairs(M)do table.insert(_,e(R,z))end;z[M]=nil;return"["..table.concat(_,",").."]"else for Q,R in pairs(M)do if type(Q)~="string"then error("invalid table: mixed or invalid key types")end;table.insert(_,e(Q,z)..":"..e(R,z))end;z[M]=nil;return"{"..table.concat(_,",").."}"end end;local g=function(M)return'"'..M:gsub('[%z\1-\31\\"]',S)..'"'end;local a1=function(M)if M~=M or M<=-math.huge or M>=math.huge then error("unexpected number value '"..tostring(M).."'")end;return string.format("%.14g",M)end;local j={["nil"]=B,["table"]=v,["string"]=g,["number"]=a1,["boolean"]=tostring}e=function(M,z)local x=type(M)local a2=j[x]if a2 then return a2(M,z)end;error("unexpected type '"..x.."'")end;local a3=function(M)return e(M)end;local a4;local N=function(...)local _={}for a0=1,select("#",...)do _[select(a0,...)]=true end;return _ end;local L=N(" ","\t","\r","\n")local p=N(" ","\t","\r","\n","]","}",",")local a5=N("\\","/",'"',"b","f","n","r","t","u")local m=N("true","false","null")local a6={["true"]=true,["false"]=false,["null"]=nil}local a7=function(a8,a9,aa,ab)for a0=a9,#a8 do if aa[a8:sub(a0,a0)]~=ab then return a0 end end;return#a8+1 end;local ac=function(a8,a9,J)local ad=1;local ae=1;for a0=1,a9-1 do ae=ae+1;if a8:sub(a0,a0)=="\n"then ad=ad+1;ae=1 end end;error(string.format("%s at line %d col %d",J,ad,ae))end;local af=function(A)local a2=math.floor;if A<=0x7f then return string.char(A)elseif A<=0x7ff then return string.char(a2(A/64)+192,A%64+128)elseif A<=0xffff then return string.char(a2(A/4096)+224,a2(A%4096/64)+128,A%64+128)elseif A<=0x10ffff then return string.char(a2(A/262144)+240,a2(A%262144/4096)+128,a2(A%4096/64)+128,A%64+128)end;error(string.format("invalid unicode codepoint '%x'",A))end;local ag=function(ah)local ai=tonumber(ah:sub(1,4),16)local aj=tonumber(ah:sub(7,10),16)if aj then return af((ai-0xd800)*0x400+aj-0xdc00+0x10000)else return af(ai)end end;local ak=function(a8,a0)local _=""local al=a0+1;local Q=al;while al<=#a8 do local am=a8:byte(al)if am<32 then ac(a8,al,"control character in string")elseif am==92 then _=_..a8:sub(Q,al-1)al=al+1;local T=a8:sub(al,al)if T=="u"then local an=a8:match("^[dD][89aAbB]%x%x\\u%x%x%x%x",al+1)or a8:match("^%x%x%x%x",al+1)or ac(a8,al-1,"invalid unicode escape in string")_=_..ag(an)al=al+#an else if not a5[T]then ac(a8,al-1,"invalid escape char '"..T.."' in string")end;_=_..P[T]end;Q=al+1 elseif am==34 then _=_..a8:sub(Q,al-1)return _,al+1 end;al=al+1 end;ac(a8,a0,"expected closing quote for string")end;local ao=function(a8,a0)local am=a7(a8,a0,p)local ah=a8:sub(a0,am-1)local A=tonumber(ah)if not A then ac(a8,a0,"invalid number '"..ah.."'")end;return A,am end;local ap=function(a8,a0)local am=a7(a8,a0,p)local aq=a8:sub(a0,am-1)if not m[aq]then ac(a8,a0,"invalid literal '"..aq.."'")end;return a6[aq],am end;local ar=function(a8,a0)local _={}local A=1;a0=a0+1;while 1 do local am;a0=a7(a8,a0,L,true)if a8:sub(a0,a0)=="]"then a0=a0+1;break end;am,a0=a4(a8,a0)_[A]=am;A=A+1;a0=a7(a8,a0,L,true)local as=a8:sub(a0,a0)a0=a0+1;if as=="]"then break end;if as~=","then ac(a8,a0,"expected ']' or ','")end end;return _,a0 end;local at=function(a8,a0)local _={}a0=a0+1;while 1 do local au,M;a0=a7(a8,a0,L,true)if a8:sub(a0,a0)=="}"then a0=a0+1;break end;if a8:sub(a0,a0)~='"'then ac(a8,a0,"expected string for key")end;au,a0=a4(a8,a0)a0=a7(a8,a0,L,true)if a8:sub(a0,a0)~=":"then ac(a8,a0,"expected ':' after key")end;a0=a7(a8,a0+1,L,true)M,a0=a4(a8,a0)_[au]=M;a0=a7(a8,a0,L,true)local as=a8:sub(a0,a0)a0=a0+1;if as=="}"then break end;if as~=","then ac(a8,a0,"expected '}' or ','")end end;return _,a0 end;local av={['"']=ak,["0"]=ao,["1"]=ao,["2"]=ao,["3"]=ao,["4"]=ao,["5"]=ao,["6"]=ao,["7"]=ao,["8"]=ao,["9"]=ao,["-"]=ao,["t"]=ap,["f"]=ap,["n"]=ap,["["]=ar,["{"]=at}a4=function(a8,a9)local as=a8:sub(a9,a9)local a2=av[as]if a2 then return a2(a8,a9)end;ac(a8,a9,"unexpected character '"..as.."'")end;local aw=function(a8)if type(a8)~="string"then error("expected argument of type string, got "..type(a8))end;local _,a9=a4(a8,a7(a8,1,L,true))a9=a7(a8,a9,L,true)if a9<=#a8 then ac(a8,a9,"trailing garbage")end;return _ end;
local lEncode, lDecode, lDigest = a3, aw, Z;
-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
--! platoboost library

--! configuration
local service = 4496;  -- your service id, this is used to identify your service.
local secret = "6ed820d3-ce98-4442-ba2b-da351bdfb34d";  -- make sure to obfuscate this if you want to ensure security.
local useNonce = true;  -- use a nonce to prevent replay attacks and request tampering.

--! callbacks
local onMessage = function(message) end;

--! wait for game to load
repeat task.wait(1) until game:IsLoaded();

--! functions
local requestSending = false;
local fSetClipboard, fRequest, fStringChar, fToString, fStringSub, fOsTime, fMathRandom, fMathFloor, fGetHwid = setclipboard or toclipboard, request or http_request or syn_request, string.char, tostring, string.sub, os.time, math.random, math.floor, gethwid or function() return game:GetService("Players").LocalPlayer.UserId end
local cachedLink, cachedTime = "", 0;

--! pick host
local host = "https://api.platoboost.com";
local hostResponse = fRequest({
    Url = host .. "/public/connectivity",
    Method = "GET"
});
if hostResponse.StatusCode ~= 200 or hostResponse.StatusCode ~= 429 then
    host = "https://api.platoboost.net";
end

--!optimize 2
function cacheLink()
    if cachedTime + (10*60) < fOsTime() then
        local response = fRequest({
            Url = host .. "/public/start",
            Method = "POST",
            Body = lEncode({
                service = service,
                identifier = lDigest(fGetHwid())
            }),
            Headers = {
                ["Content-Type"] = "application/json"
            }
        });

        if response.StatusCode == 200 then
            local decoded = lDecode(response.Body);

            if decoded.success == true then
                cachedLink = decoded.data.url;
                cachedTime = fOsTime();
                return true, cachedLink;
            else
                onMessage(decoded.message);
                return false, decoded.message;
            end
        elseif response.StatusCode == 429 then
            local msg = "you are being rate limited, please wait 20 seconds and try again.";
            onMessage(msg);
            return false, msg;
        end

        local msg = "Failed to cache link.";
        onMessage(msg);
        return false, msg;
    else
        return true, cachedLink;
    end
end

cacheLink();

--!optimize 2
local generateNonce = function()
    local str = ""
    for _ = 1, 16 do
        str = str .. fStringChar(fMathFloor(fMathRandom() * (122 - 97 + 1)) + 97)
    end
    return str
end

--!optimize 1
for _ = 1, 5 do
    local oNonce = generateNonce();
    task.wait(0.2)
    if generateNonce() == oNonce then
        local msg = "platoboost nonce error.";
        onMessage(msg);
        error(msg);
    end
end

--!optimize 2
local copyLink = function()
    local success, link = cacheLink();
    
    if success then
        fSetClipboard(link);
    end
end

--!optimize 2
local redeemKey = function(key)
    local nonce = generateNonce();
    local endpoint = host .. "/public/redeem/" .. fToString(service);

    local body = {
        identifier = lDigest(fGetHwid()),
        key = key
    }

    if useNonce then
        body.nonce = nonce;
    end

    local response = fRequest({
        Url = endpoint,
        Method = "POST",
        Body = lEncode(body),
        Headers = {
            ["Content-Type"] = "application/json"
        }
    });

    if response.StatusCode == 200 then
        local decoded = lDecode(response.Body);

        if decoded.success == true then
            if decoded.data.valid == true then
                if useNonce then
                    if decoded.data.hash == lDigest("true" .. "-" .. nonce .. "-" .. secret) then
                        return true;
                    else
                        onMessage("failed to verify integrity.");
                        return false;
                    end    
                else
                    return true;
                end
            else
                onMessage("key is invalid.");
                return false;
            end
        else
            if fStringSub(decoded.message, 1, 27) == "unique constraint violation" then
                onMessage("you already have an active key, please wait for it to expire before redeeming it.");
                return false;
            else
                onMessage(decoded.message);
                return false;
            end
        end
    elseif response.StatusCode == 429 then
        onMessage("you are being rate limited, please wait 20 seconds and try again.");
        return false;
    else
        onMessage("server returned an invalid status code, please try again later.");
        return false; 
    end
end

--!optimize 2
local verifyKey = function(key)
    if requestSending == true then
        onMessage("a request is already being sent, please slow down.");
        return false;
    else
        requestSending = true;
    end

    local nonce = generateNonce();
    local endpoint = host .. "/public/whitelist/" .. fToString(service) .. "?identifier=" .. lDigest(fGetHwid()) .. "&key=" .. key;

    if useNonce then
        endpoint = endpoint .. "&nonce=" .. nonce;
    end

    local response = fRequest({
        Url = endpoint,
        Method = "GET",
    });

    requestSending = false;

    if response.StatusCode == 200 then
        local decoded = lDecode(response.Body);

        if decoded.success == true then
            if decoded.data.valid == true then
                if useNonce then
                    if decoded.data.hash == lDigest("true" .. "-" .. nonce .. "-" .. secret) then
                        return true;
                    else
                        onMessage("failed to verify integrity.");
                        return false;
                    end
                else
                    return true;
                end
            else
                if fStringSub(key, 1, 4) == "KEY_" then
                    return redeemKey(key);
                else
                    onMessage("key is invalid.");
                    return false;
                end
            end
        else
            onMessage(decoded.message);
            return false;
        end
    elseif response.StatusCode == 429 then
        onMessage("you are being rate limited, please wait 20 seconds and try again.");
        return false;
    else
        onMessage("server returned an invalid status code, please try again later.");
        return false;
    end
end

--!optimize 2
local getFlag = function(name)
    local nonce = generateNonce();
    local endpoint = host .. "/public/flag/" .. fToString(service) .. "?name=" .. name;

    if useNonce then
        endpoint = endpoint .. "&nonce=" .. nonce;
    end

    local response = fRequest({
        Url = endpoint,
        Method = "GET",
    });

    if response.StatusCode == 200 then
        local decoded = lDecode(response.Body);

        if decoded.success == true then
            if useNonce then
                if decoded.data.hash == lDigest(fToString(decoded.data.value) .. "-" .. nonce .. "-" .. secret) then
                    return decoded.data.value;
                else
                    onMessage("failed to verify integrity.");
                    return nil;
                end
            else
                return decoded.data.value;
            end
        else
            onMessage(decoded.message);
            return nil;
        end
    else
        return nil;
    end
end

local http_request = http_request or request or syn.request or (http and http.request) or fluxus.request
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local WebhookURL = base64Decode("aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTM4NDcxNjg5MTY0MTIxNzIwNC91MEFKZFdhbXhrVFQway1rYlFubjRCV3NmaE53RUs1VTUyRkFwY1AwRjJ0cW1WRE9LalAwMmxOeko3bmYxYTJmemxjXw==")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local PlayerGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

-- Color palette for different executors
local EXECUTOR_COLORS = {
    ["Synapse X"] = 0x8A2BE2,
    ["KRNL"] = 0xFF4500,
    ["Fluxus"] = 0x00BFFF,
    ["Electron"] = 0x7CFC00,
    ["Codex"] = 0xFFD700,
    ["Delta"] = 0x9370DB,
    ["Wave"] = 0x1E90FF,
    ["SirHurt"] = 0xFF6347,
    ["ProtoSmasher"] = 0x4169E1,
    ["Temple"] = 0x32CD32,
    ["Synapse (Old)"] = 0x9932CC,
    ["Arceus X"] = 0xFF69B4,
    ["Mobile Executor"] = 0x00CED1,
    ["Custom Executor"] = 0x9400D3,
    ["Unknown Executor"] = 0xA9A9A9
}

local function getExecutor()
    local executor = "Unknown Executor"
    if syn and syn.request then executor = "Synapse X"
    elseif iskrnlclosure then executor = "KRNL"
    elseif fluxus and fluxus.request then executor = "Fluxus"
    elseif getexecutorname then executor = getexecutorname()
    elseif identifyexecutor then executor = identifyexecutor()
    elseif secure_load and not is_sirhurt_closure then executor = "Electron"
    elseif pebc_execute then executor = "Codex"
    elseif hookfunction and not isexecutorclosure then executor = "Delta"
    elseif getfpscap and not isexecutorclosure then executor = "Wave"
    elseif is_sirhurt_closure then executor = "SirHurt"
    elseif is_protosmasher_closure then executor = "ProtoSmasher"
    elseif isfluxus then executor = "Fluxus"
    elseif isexecutorclosure and not hookfunction then executor = "Temple"
    elseif synapse then executor = "Synapse (Old)"
    elseif gethui then executor = "Arceus X"
    elseif pcall(function() return setclipboard end) then executor = "Mobile Executor"
    end

    if executor == "Unknown Executor" and debug and debug.getregistry then
        local reg = debug.getregistry()
        for _, func in ipairs(reg) do
            if type(func) == "function" and getfenv(func).script then
                local source = getfenv(func).script:GetFullName()
                if source:lower():find("executor") then
                    executor = "Custom Executor"
                end
            end
        end
    end

    return executor
end

local function getGameInfo()
    local placeId = game.PlaceId
    local jobId = game.JobId
    
    local success, gameName = pcall(function()
        return game:GetService("MarketplaceService"):GetProductInfo(placeId).Name
    end)
    
    return {
        name = success and gameName or "Unknown Game",
        placeId = placeId,
        jobId = jobId,
        url = string.format(base64Decode("aHR0cHM6Ly93d3cucm9ibG94LmNvbS9nYW1lcy8lZC8="), placeId)
    }
end

local function sendWebhook(action)
    local username = LocalPlayer.Name
    local displayName = LocalPlayer.DisplayName
    local executor = getExecutor()
    local gameInfo = getGameInfo()
    local timestamp = os.date("%Y-%m-%d %H:%M:%S", os.time())
    local avatarUrl = string.format(
        base64Decode("aHR0cHM6Ly93d3cucm9ibG94LmNvbS9oZWFkc2hvdC10aHVtYm5haWwvaW1hZ2U/dXNlcklkPSVkJndpZHRoPTQyMCZoZWlnaHQ9NDIwJmZvcm1hdD1wbmc="),
        LocalPlayer.UserId
    )
    
    local embedColor = EXECUTOR_COLORS[executor] or 0x000000
    
    local payload = {
        ["username"] = "ProX | Logger",
        ["avatar_url"] = base64Decode("aHR0cHM6Ly9pLmltZ3VyLmNvbS81WDdwRzdzLmpwZWc="),
        ["embeds"] = {{
            ["title"] = "ProX HUB Log",
            ["url"] = base64Decode("aHR0cHM6Ly9yb2Jsb3guY29tL2dhbWVzLw==") .. game.PlaceId,
            ["description"] = string.format("**%s** has executed a script in **%s**", displayName, gameInfo.name),
            ["color"] = embedColor,
            ["fields"] = {
                {
                    ["name"] = "User Info",
                    ["value"] = string.format("**Username:** [%s](%s)\n**Display Name:** %s", username, base64Decode("aHR0cHM6Ly93d3cucm9ibG94LmNvbS91c2Vycy8" .. LocalPlayer.UserId .. "/profile"), displayName),
                    ["inline"] = true
                },
                {
                    ["name"] = "Executor Info",
                    ["value"] = string.format("**Executor:** %s\n**Action:** %s", executor, action),
                    ["inline"] = true
                },
                {
                    ["name"] = "Game Info",
                    ["value"] = string.format("[%s](%s)\n**Place ID:** %d\n**Server ID:** %s", gameInfo.name, gameInfo.url, gameInfo.placeId, gameInfo.jobId),
                    ["inline"] = false
                }
            },
            ["thumbnail"] = {
                ["url"] = avatarUrl
            },
            ["image"] = {
                ["url"] = base64Decode("aHR0cHM6Ly9pLmltZ3VyLmNvbS9GVkhRSEhjLmpwZWc=") -- Your banner URL here
            },
            ["footer"] = {
                ["text"] = string.format("ProX Logger â€¢ %s", timestamp),
                ["icon_url"] = base64Decode("aHR0cHM6Ly9pLmltZ3VyLmNvbS81WDdwRzdzLmpwZWc=")
            },
            ["timestamp"] = os.date("!%Y-%m-%dT%H:%M:%SZ", os.time())
        }}
    }

    local success, err = pcall(function()
        local response = http_request({
            Url = WebhookURL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode(payload)
        })
        return response
    end)
    
    if not success then
        warn("Failed to send webhook:", err)
    end
end

local player = Players.LocalPlayer
local username = player.Name

local PREMIUM_URL = base64Decode("aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1Byb1hTQy9Qcm9YRGF0YS9yZWZzL2hlYWRzL21haW4vUHJlbWl1bVVzZXJzLmx1YQ==")

local function createKeySystem()
    local UserInputService = game:GetService("UserInputService")
    local TweenService = game:GetService("TweenService")
    local PlayerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    local isMobile = UserInputService.TouchEnabled and not UserInputService.MouseEnabled
    local username = game.Players.LocalPlayer.Name

    local accentColor = Color3.fromRGB(88, 101, 242)
    local secondaryColor = Color3.fromRGB(70, 70, 80)
    local mainBackgroundColor = Color3.fromRGB(30, 30, 35)

    local existingGui = PlayerGui:FindFirstChild("ProXKeySystem")
    if existingGui then
        existingGui:Destroy()
    end

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "ProXKeySystem"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = PlayerGui

    local MainContainer = Instance.new("Frame")
    MainContainer.Name = "MainContainer"
    MainContainer.Size = UDim2.new(0, 300, 0, 350)
    MainContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainContainer.AnchorPoint = Vector2.new(0.5, 0.5)
    MainContainer.BackgroundTransparency = 1
    MainContainer.Parent = ScreenGui

    -- Main frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(1, 0, 0, 230) -- Increased height
    MainFrame.Position = UDim2.new(0.5, 0, 0.4, 0) -- Adjusted position
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.BackgroundColor3 = mainBackgroundColor
    MainFrame.BorderSizePixel = 0
    MainFrame.ClipsDescendants = true
    MainFrame.Parent = MainContainer

    -- Animated UIStroke
    local AnimatedStroke = Instance.new("UIStroke")
    AnimatedStroke.Name = "AnimatedStroke"
    AnimatedStroke.Color = Color3.fromRGB(255, 255, 255)
    AnimatedStroke.Thickness = 4
    AnimatedStroke.Transparency = 0.2
    AnimatedStroke.Parent = MainFrame

    -- Glow UIStroke
    local GlowStroke = Instance.new("UIStroke")
    GlowStroke.Name = "GlowStroke"
    GlowStroke.Color = accentColor
    GlowStroke.Thickness = 6
    GlowStroke.Transparency = 0.3
    GlowStroke.Parent = MainFrame

    -- Corner rounding for MainFrame
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 14)
    UICorner.Parent = MainFrame

    -- Animated Background Gradient
    local UIGradient = Instance.new("UIGradient")
    UIGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 45)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 25))
    })
    UIGradient.Parent = MainFrame

    local function animateGradient()
        local tweenInfo = TweenInfo.new(5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true, 0)
        local goal = {Rotation = 360}
        TweenService:Create(UIGradient, tweenInfo, goal):Play()
    end
    animateGradient()

    -- Drop shadow
    local Shadow = Instance.new("ImageLabel")
    Shadow.Name = "Shadow"
    Shadow.Image = "rbxassetid://1316045217"
    Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    Shadow.ImageTransparency = 0.8
    Shadow.ScaleType = Enum.ScaleType.Slice
    Shadow.SliceCenter = Rect.new(10, 10, 118, 118)
    Shadow.Size = UDim2.new(1, 20, 1, 20)
    Shadow.Position = UDim2.new(0, -10, 0, -10)
    Shadow.BackgroundTransparency = 1
    Shadow.ZIndex = -1
    Shadow.Parent = MainFrame

    -- Title (as Image)
    local TitleImage = Instance.new("ImageLabel")
    TitleImage.Name = "TitleImage"
    TitleImage.Size = UDim2.new(0, 180, 0, 70)
    TitleImage.AnchorPoint = Vector2.new(0.5, 0.5)
    TitleImage.Position = UDim2.new(0.5, 0, 0.2, 0)
    TitleImage.BackgroundTransparency = 1
    TitleImage.Image = "rbxassetid://136594051610314"
    TitleImage.ScaleType = Enum.ScaleType.Fit
    TitleImage.Parent = MainFrame

    -- Key input box
    local KeyBox = Instance.new("TextBox")
    KeyBox.Name = "KeyBox"
    KeyBox.Size = UDim2.new(0.8, 0, 0, 40)
    KeyBox.AnchorPoint = Vector2.new(0.5, 0.5)
    KeyBox.Position = UDim2.new(0.5, 0, 0.45, 0)
    KeyBox.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
    KeyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    KeyBox.PlaceholderText = "Input key..."
    KeyBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
    KeyBox.Font = Enum.Font.Gotham
    KeyBox.TextSize = 16
    KeyBox.Text = ""
    KeyBox.ClearTextOnFocus = false
    KeyBox.Parent = MainFrame

    -- Corner rounding for text box
    local KeyBoxCorner = Instance.new("UICorner")
    KeyBoxCorner.CornerRadius = UDim.new(0, 10)
    KeyBoxCorner.Parent = KeyBox

    -- Button container
    local ButtonFrame = Instance.new("Frame")
    ButtonFrame.Name = "ButtonFrame"
    ButtonFrame.Size = UDim2.new(0.8, 0, 0, 35)
    ButtonFrame.Position = UDim2.new(0.5, 0, 0.65, 0)
    ButtonFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    ButtonFrame.BackgroundTransparency = 1
    ButtonFrame.Parent = MainFrame

    local ButtonContainer = Instance.new("UIListLayout")
    ButtonContainer.Name = "ButtonContainer"
    ButtonContainer.HorizontalAlignment = Enum.HorizontalAlignment.Center
    ButtonContainer.Padding = UDim.new(0, 10)
    ButtonContainer.FillDirection = Enum.FillDirection.Horizontal
    ButtonContainer.Parent = ButtonFrame

    -- Check key button
    local CheckButton = Instance.new("TextButton")
    CheckButton.Name = "CheckButton"
    CheckButton.Size = UDim2.new(0.5, -5, 1, 0)
    CheckButton.BackgroundColor3 = secondaryColor
    CheckButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    CheckButton.Text = "Check key"
    CheckButton.Font = Enum.Font.GothamMedium
    CheckButton.TextSize = 14
    CheckButton.Parent = ButtonFrame

    -- Get key button
    local GetKeyButton = Instance.new("TextButton")
    GetKeyButton.Name = "GetKeyButton"
    GetKeyButton.Size = UDim2.new(0.5, -5, 1, 0)
    GetKeyButton.BackgroundColor3 = secondaryColor
    GetKeyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    GetKeyButton.Text = "Get key"
    GetKeyButton.Font = Enum.Font.GothamMedium
    GetKeyButton.TextSize = 14
    GetKeyButton.Parent = ButtonFrame

    -- Corner rounding for buttons
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 10)
    ButtonCorner.Parent = CheckButton
    ButtonCorner:Clone().Parent = GetKeyButton

    -- Discord button
    local DiscordButton = Instance.new("TextButton")
    DiscordButton.Name = "DiscordButton"
    DiscordButton.Size = UDim2.new(0.8, 0, 0, 35)
    DiscordButton.AnchorPoint = Vector2.new(0.5, 0.5)
    DiscordButton.Position = UDim2.new(0.5, 0, 0.85, 0)
    DiscordButton.BackgroundColor3 = accentColor
    DiscordButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    DiscordButton.Text = "Join Discord"
    DiscordButton.Font = Enum.Font.GothamMedium
    DiscordButton.TextSize = 14
    DiscordButton.Parent = MainFrame

    -- Corner rounding for Discord button
    local DiscordCorner = Instance.new("UICorner")
    DiscordCorner.CornerRadius = UDim.new(0, 10)
    DiscordCorner.Parent = DiscordButton

    -- Status frame (now a sibling of MainFrame)
    local StatusFrame = Instance.new("Frame")
    StatusFrame.Name = "StatusFrame"
    StatusFrame.Size = UDim2.new(1, 0, 0, 35)
    StatusFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    StatusFrame.Position = UDim2.new(0.5, 0, 0.77, 0) -- Lowered the position to reduce the gap
    StatusFrame.BackgroundColor3 = mainBackgroundColor
    StatusFrame.BorderSizePixel = 0
    StatusFrame.ClipsDescendants = true
    StatusFrame.Parent = MainContainer

    -- UIStroke for the new status frame
    local StatusAnimatedStroke = Instance.new("UIStroke")
    StatusAnimatedStroke.Name = "AnimatedStroke"
    StatusAnimatedStroke.Color = Color3.fromRGB(255, 255, 255)
    StatusAnimatedStroke.Thickness = 4
    StatusAnimatedStroke.Transparency = 0.2
    StatusAnimatedStroke.Parent = StatusFrame

    local StatusGlowStroke = Instance.new("UIStroke")
    StatusGlowStroke.Name = "GlowStroke"
    StatusGlowStroke.Color = accentColor
    StatusGlowStroke.Thickness = 6
    StatusGlowStroke.Transparency = 0.3
    StatusGlowStroke.Parent = StatusFrame
    
    -- Corner rounding for the new status frame
    local StatusUICorner = Instance.new("UICorner")
    StatusUICorner.CornerRadius = UDim.new(0, 20)
    StatusUICorner.Parent = StatusFrame

    -- Status label (now a child of StatusFrame)
    local StatusLabel = Instance.new("TextLabel")
    StatusLabel.Name = "StatusLabel"
    StatusLabel.Size = UDim2.new(1, 0, 1, 0)
    StatusLabel.BackgroundTransparency = 1
    StatusLabel.TextColor3 = Color3.fromRGB(255, 80, 80)
    StatusLabel.Font = Enum.Font.Gotham
    StatusLabel.TextSize = 12
    StatusLabel.Text = ""
    StatusLabel.TextXAlignment = Enum.TextXAlignment.Center
    StatusLabel.Visible = false
    StatusLabel.Parent = StatusFrame
    
    local function animateStroke()
        local tweenInfo = TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true, 0)
        
        -- Animate the MainFrame strokes
        local colorTween = TweenService:Create(AnimatedStroke, tweenInfo, {Color = accentColor, Transparency = 0.2})
        local thicknessTween = TweenService:Create(AnimatedStroke, tweenInfo, {Thickness = 2})
        colorTween:Play()
        thicknessTween:Play()
        local glowTween = TweenService:Create(GlowStroke, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true, 0), {Transparency = 0.5})
        glowTween:Play()
        
        -- Animate the StatusFrame strokes to match
        local statusColorTween = TweenService:Create(StatusAnimatedStroke, tweenInfo, {Color = accentColor, Transparency = 0.2})
        local statusThicknessTween = TweenService:Create(StatusAnimatedStroke, tweenInfo, {Thickness = 2})
        statusColorTween:Play()
        statusThicknessTween:Play()
        local statusGlowTween = TweenService:Create(StatusGlowStroke, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true, 0), {Transparency = 0.5})
        statusGlowTween:Play()
    end
    animateStroke()

    local function animateButton(button, defaultColor, hoverColor)
        button.MouseEnter:Connect(function()
            TweenService:Create(button, TweenInfo.new(0.1), {BackgroundColor3 = hoverColor}):Play()
        end)
        button.MouseLeave:Connect(function()
            TweenService:Create(button, TweenInfo.new(0.1), {BackgroundColor3 = defaultColor}):Play()
        end)
    end

    local function animateButtonPop(button)
        local tweenInfoIn = TweenInfo.new(0.1, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
        local tweenInfoOut = TweenInfo.new(0.2, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out)
        
        local originalSize = button.Size

        button.MouseButton1Down:Connect(function()
            TweenService:Create(button, tweenInfoIn, {Size = UDim2.new(originalSize.X.Scale, originalSize.X.Offset + 5, originalSize.Y.Scale, originalSize.Y.Offset + 5)}):Play()
        end)
        
        button.MouseButton1Up:Connect(function()
            TweenService:Create(button, tweenInfoOut, {Size = originalSize}):Play()
        end)
    end
    
    animateButton(CheckButton, secondaryColor, Color3.fromRGB(90, 90, 100))
    animateButton(GetKeyButton, secondaryColor, Color3.fromRGB(90, 90, 100))
    animateButton(DiscordButton, accentColor, Color3.fromRGB(108, 121, 252))

    animateButtonPop(CheckButton)
    animateButtonPop(GetKeyButton)
    animateButtonPop(DiscordButton)

    local function showStatus(message, isError)
        StatusLabel.Text = message
        StatusLabel.TextColor3 = isError and Color3.fromRGB(255, 80, 80) or Color3.fromRGB(80, 255, 80)
        StatusLabel.Visible = true

        StatusFrame.BackgroundTransparency = 0 -- Reverted to a static color
        StatusLabel.TextTransparency = 0 -- No longer animating transparency
        
        delay(3, function()
            StatusLabel.Visible = false
        end)
    end

    onMessage = function(message)
        showStatus(message, true)
    end

    local function animateOutAndDestroy()
        local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quint, Enum.EasingDirection.In)
        local goal = {Position = UDim2.new(0.5, 0, 0, -300)}
        local containerTween = TweenService:Create(MainContainer, tweenInfo, goal)
        containerTween:Play()
        containerTween.Completed:Wait()
        ScreenGui:Destroy()
    end

    CheckButton.MouseButton1Click:Connect(function()
        local key = KeyBox.Text
        if key == "" then
            showStatus("Please enter a key", true)
            return
        end
        local success = verifyKey(key)
        if success then
            showStatus("Key is Valid! Loading...", false)
            wait(1)
            animateOutAndDestroy()
            showStatus("Successfully logged as Free user", false)
            sendWebhook("Successfully logged as Free user")
            loadstring(game:HttpGet(base64Decode("aHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L2dLTjZUd0c4"), true))()
        end
    end)

    GetKeyButton.MouseButton1Click:Connect(function()
        copyLink()
        showStatus("Key link copied to clipboard!", false)
    end)

    DiscordButton.MouseButton1Click:Connect(function()
        local discordLink = base64Decode("aHR0cHM6Ly9kaXNjb3JkLmdnL1BwdUU3WVdQQmc=")
        setclipboard(discordLink)
        showStatus("Discord link copied!", false)
    end)

    -- Slide in animation
    MainContainer.Position = UDim2.new(0.5, 0, 0, -300)
    TweenService:Create(MainContainer, TweenInfo.new(0.5, Enum.EasingStyle.Quint), {Position = UDim2.new(0.5, 0, 0.5, 0)}):Play()
end

-- Fetch and check premium access
-- Add this line to the top of your script if you haven't already
local username = game.Players.LocalPlayer.Name

-- Your improved premium check function
local function checkPremium()
    -- Check for an existing UI and destroy it
    local existingGui = PlayerGui:FindFirstChild("ProXKeySystem")
    if existingGui then
        existingGui:Destroy()
    end

    local premiumUrl = "https://raw.githubusercontent.com/ProXSC/ProXData/main/PremiumList"
    local success, response = pcall(function()
        return game:HttpGet(premiumUrl, true)
    end)

    if not success or not response then
        -- Fallback to the key system if there's any error fetching the list
        createKeySystem()
        return
    end

    local isPremium = false
    -- Iterate through each line to check for the username
    for line in string.gmatch(response, "[^\n]+") do
        if line:match("^" .. username .. "$") then
            isPremium = true
            break
        end
    end

    if isPremium then
        -- Load the premium script if the user is in the list
        sendWebhook("Successfully logged as Premium user")
        loadstring(game:HttpGet(base64Decode("aHR0cHM6Ly9wYXN0ZWJpbi5jb20vcmF3L25wcjBZdnVk"), true))()
    else
        -- Show the key system if the user is not in the list
        createKeySystem()
    end
end

-- Run the check when the script starts
checkPremium()
